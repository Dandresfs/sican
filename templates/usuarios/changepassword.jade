extends ../inicio
block scroll_header_panel_title
    span(class="title") CAMBIAR CONTRASEÑA
block help_content
    p(class="title-help") Descripción:
    p.
        Con este formulario puedes cambiar tu contraseña de acceso al sistema de información SICAN, una copia sera
        enviada a tu correo principal para que tengas a la mano el ultimo cambio realizado.

block head_content_inicio
    link(rel="import",href="{% static 'bower_components/paper-input/paper-input.html'%}")
    link(rel="import",href="{% static 'bower_components/file-upload-sican/file-upload-sican.html'%}")
    link(rel="import",href="{% static 'bower_components/gold-email-input/gold-email-input.html'%}")

block breadcrum
    a(href="/proyectos/",class="link_button")
        paper-icon-item(class="breadcrumb-paper-icon-item-class") Inicio
            iron-icon(icon="check",item-icon)

    paper-icon-item(class="breadcrum_active",disabled) Cambiar contraseña
        iron-icon(icon="check",item-icon)

block scroll_header_panel_content
    div(class="container-fluid container-panel")
        div(class="row")
            div(class="col-md-6 col-md-offset-3 col-sm-8 col-sm-offset-2")
                form(method="POST",enctype="multipart/form-data",id="form")
                    | {% csrf_token %}
                    paper-input(label="Contraseña anterior",type="password",name="previus_password",id="previus_password",value="{{previus_password}}")
                    paper-input(label="Nueva contraseña",type="password",name="new_password_1",id="new_password_1")
                    paper-input(label="Repita la nueva contraseña",type="password",name="new_password_2",id="new_password_2")
                    div(class="text-right login-form-button")
                        paper-button(class="submit",id="submit_form",disabled) Cambiar contraseña

block body_script_content
    script.
        $('#submit_form').on("click", function (event){
            $('#form').submit();
        });

        $('#previus_password').on("keyup", function (event) {
            if($('#previus_password').val() != "" && $('#new_password_1').val() != "" && $('#new_password_2').val() != ""){
               if($('#new_password_1').val() == $('#new_password_2').val()){
                  $('#submit_form').removeAttr('disabled');
               }
               else{
                  $('#submit_form').attr('disabled','disabled');
               }
            }
            else{
               $('#submit_form').attr('disabled','disabled');
            }
        });

        $('#new_password_1').on("keyup", function (event) {
            if($('#previus_password').val() != "" && $('#new_password_1').val() != "" && $('#new_password_2').val() != ""){
               if($('#new_password_1').val() == $('#new_password_2').val()){
                  $('#submit_form').removeAttr('disabled');
               }
               else{
                  $('#submit_form').attr('disabled','disabled');
               }
            }
            else{
               $('#submit_form').attr('disabled','disabled');
            }
        });

        $('#new_password_2').on("keyup", function (event) {
            if($('#previus_password').val() != "" && $('#new_password_1').val() != "" && $('#new_password_2').val() != ""){
               if($('#new_password_1').val() == $('#new_password_2').val()){
                  $('#submit_form').removeAttr('disabled');
               }
               else{
                  $('#submit_form').attr('disabled','disabled');
               }
            }
            else{
               $('#submit_form').attr('disabled','disabled');
            }
        });